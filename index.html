<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Raksha Sentinel</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href='data:application/manifest+json,{"name":"Raksha","short_name":"Raksha","start_url":".","display":"standalone","background_color":"#000510","theme_color":"#f43f5e","orientation":"portrait","icons":[{"src":"https://cdn-icons-png.flaticon.com/512/2555/2555572.png","sizes":"192x192","type":"image/png"}]}'>
    <meta name="theme-color" content="#000510">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Rajdhani"', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    colors: {
                        cyber: {
                            bg: '#000510',
                            glass: 'rgba(10, 15, 30, 0.7)',
                            border: 'rgba(255, 255, 255, 0.1)',
                            primary: '#f43f5e',
                            accent: '#06b6d4'
                        }
                    },
                    animation: {
                        'pulse-glow': 'pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'scanline': 'scanline 8s linear infinite',
                        'radar': 'radar 4s linear infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        'pulse-glow': {
                            '0%, 100%': { opacity: 1, boxShadow: '0 0 20px rgba(244, 63, 94, 0.5)' },
                            '50%': { opacity: .8, boxShadow: '0 0 40px rgba(244, 63, 94, 0.8)' }
                        },
                        'radar': {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' }
                        },
                        'float': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-6px)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            background-color: #000510; 
            color: #e2e8f0; 
            overflow: hidden; 
            -webkit-tap-highlight-color: transparent; 
            touch-action: manipulation;
        }
        
        /* Advanced Glassmorphism */
        .glass-panel {
            background: rgba(13, 18, 30, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
        }
        
        .glass-card {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        /* Neon Glow Effects */
        .neon-text-rose { text-shadow: 0 0 10px rgba(244, 63, 94, 0.6); }
        .neon-text-cyan { text-shadow: 0 0 10px rgba(6, 182, 212, 0.6); }

        /* SOS Reactor Core */
        .reactor-container { position: relative; width: 200px; height: 200px; display: flex; justify-content: center; align-items: center; }
        .reactor-core {
            width: 140px; height: 140px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fb7185, #e11d48);
            box-shadow: 0 0 50px rgba(225, 29, 72, 0.5), inset 0 0 20px rgba(255,255,255,0.3);
            position: relative; z-index: 10;
            display: flex; justify-content: center; align-items: center;
            transition: all 0.3s ease;
        }
        .reactor-core:active { transform: scale(0.92); }
        
        .reactor-ring {
            position: absolute; border-radius: 50%; border: 1px solid rgba(244, 63, 94, 0.3);
            animation: radar 8s linear infinite;
        }
        .r1 { width: 100%; height: 100%; border-top-color: #f43f5e; animation-duration: 6s; }
        .r2 { width: 120%; height: 120%; border-left-color: #f43f5e; animation-duration: 10s; animation-direction: reverse; opacity: 0.6; }
        
        /* Map Effects */
        .radar-sweep {
            position: absolute; top: 50%; left: 50%; width: 100%; height: 100%;
            background: conic-gradient(from 0deg, transparent 0deg, rgba(6, 182, 212, 0.1) 60deg, transparent 60deg);
            transform-origin: top left;
            animation: radar 4s linear infinite;
            pointer-events: none;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 3px; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 4px; }
        
        .pb-safe { padding-bottom: calc(6rem + env(safe-area-inset-bottom)); }
        
        .grid-bg {
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONS (Clean SVG) ---
        const Icon = ({ name, className, ...props }) => {
            const icons = {
                Shield: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
                Siren: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7 18v-6a5 5 0 1 1 10 0v6"/><path d="M5 21a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2"/><path d="M21 12h1"/><path d="M18.5 4.5 20 3"/><path d="M2 12h1"/><path d="M4 3 5.5 4.5"/></svg>,
                Map: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/><line x1="8" y1="2" x2="8" y2="18"/><line x1="16" y1="6" x2="16" y2="22"/></svg>,
                Users: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
                Zap: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
                Eye: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>,
                Phone: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
                Grid: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>,
                FileText: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>,
                Share: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>,
                Crosshair: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="22" y1="12" x2="18" y2="12"/><line x1="6" y1="12" x2="2" y2="12"/><line x1="12" y1="6" x2="12" y2="2"/><line x1="12" y1="22" x2="12" y2="18"/></svg>,
                Send: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>,
                MoreVertical: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>,
                LogOut: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>,
                X: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
                ChevronRight: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="9 18 15 12 9 6"/></svg>,
                Battery: (p) => <svg {...p} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="1" y="6" width="18" height="12" rx="2" ry="2"/><line x1="23" y1="13" x2="23" y2="11"/></svg>,
            };
            const Comp = icons[name] || icons.Shield;
            return <Comp className={className} {...props} />;
        };

        // --- AUTH SIMULATION ---
        const useAuth = () => {
            const [user, setUser] = useState(null);
            useEffect(() => {
                const u = localStorage.getItem('raksha_u');
                if (u) setUser(JSON.parse(u));
            }, []);
            const login = (email) => {
                const u = { name: email.split('@')[0], email };
                localStorage.setItem('raksha_u', JSON.stringify(u));
                setUser(u);
            };
            return { user, login, logout: () => { localStorage.removeItem('raksha_u'); setUser(null); }};
        };

        // --- COMPONENTS ---

        const SOSButton = () => {
            const [active, setActive] = useState(false);
            const [text, setText] = useState('SOS');
            
            const handlePress = () => {
                if(active) return;
                setActive(true);
                setText('SENT');
                if(navigator.vibrate) navigator.vibrate([500, 200, 500]);
                setTimeout(() => { setActive(false); setText('SOS'); }, 3000);
            };

            return (
                <div className="flex flex-col items-center justify-center relative py-6">
                    <div className="reactor-container">
                        <div className="reactor-ring r1"></div>
                        <div className="reactor-ring r2"></div>
                        <button 
                            onClick={handlePress}
                            className={`reactor-core ${active ? 'animate-pulse' : ''}`}
                        >
                            <div className="flex flex-col items-center text-white z-20">
                                <Icon name="Siren" className="w-10 h-10 mb-1 drop-shadow-lg" />
                                <span className="text-3xl font-black tracking-widest drop-shadow-md">{text}</span>
                            </div>
                        </button>
                    </div>
                    <div className="mt-4 text-rose-500 font-mono text-[10px] uppercase tracking-[0.3em] font-bold animate-pulse">
                        {active ? 'DISTRESS SIGNAL LIVE' : 'SYSTEM ARMED'}
                    </div>
                </div>
            );
        };

        const StatusBadge = ({ label, value, color }) => (
            <div className="glass-panel p-3 rounded-xl flex flex-col items-center justify-center w-full border border-white/5 relative overflow-hidden group">
                <div className={`absolute inset-0 bg-${color}-500/5 group-hover:bg-${color}-500/10 transition-colors`}></div>
                <span className={`text-${color}-400 font-bold text-lg font-mono relative z-10`}>{value}</span>
                <span className="text-[9px] text-slate-500 uppercase tracking-widest mt-1 relative z-10">{label}</span>
            </div>
        );

        const QuickAction = ({ icon, label, color, onClick }) => (
            <button onClick={onClick} className="glass-panel p-4 rounded-2xl flex flex-col items-center gap-3 active:scale-95 transition-transform border border-white/5 hover:border-white/10 group relative overflow-hidden">
                <div className={`absolute top-0 right-0 w-8 h-8 bg-${color}-500/20 blur-xl rounded-full`}></div>
                <div className={`w-12 h-12 rounded-full bg-${color}-500/10 flex items-center justify-center text-${color}-400 group-hover:scale-110 transition-transform shadow-lg shadow-${color}-500/10`}>
                    <Icon name={icon} className="w-6 h-6" />
                </div>
                <span className="text-xs font-bold uppercase tracking-wider text-slate-300 group-hover:text-white transition-colors">{label}</span>
            </button>
        );

        // --- VIEWS ---

        const HomeView = ({ user }) => {
            const [siren, setSiren] = useState(false);
            
            return (
                <div className="px-6 pt-8 pb-32 h-full flex flex-col overflow-y-auto">
                    {/* Header */}
                    <div className="flex justify-between items-start mb-6">
                        <div>
                            <div className="text-[10px] font-mono text-cyan-400 mb-1 flex items-center gap-2">
                                <span className="w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse"></span>
                                SECURE UPLINK: ACTIVE
                            </div>
                            <h1 className="text-3xl font-bold text-white uppercase tracking-tight">
                                COMMAND <span className="text-rose-500 neon-text-rose">CENTER</span>
                            </h1>
                        </div>
                        <div className="w-10 h-10 rounded-full bg-gradient-to-br from-rose-600 to-purple-700 flex items-center justify-center font-bold text-white border border-white/10 shadow-lg">
                            {user.name[0]}
                        </div>
                    </div>

                    {/* Status Grid */}
                    <div className="grid grid-cols-3 gap-3 mb-6">
                        <StatusBadge label="Threat" value="LOW" color="emerald" />
                        <StatusBadge label="Signal" value="5G+" color="cyan" />
                        <StatusBadge label="Battery" value="98%" color="emerald" />
                    </div>

                    {/* Hero SOS */}
                    <div className="flex-1 flex flex-col justify-center items-center py-4">
                        <div className="absolute w-full h-[1px] bg-gradient-to-r from-transparent via-rose-500/20 to-transparent top-1/2 -z-10"></div>
                        <SOSButton />
                    </div>

                    {/* Quick Actions (Removed Auto Record) */}
                    <div className="grid grid-cols-2 gap-4 mt-6">
                        <QuickAction icon="Zap" label="Siren" color="rose" onClick={() => setSiren(!siren)} />
                        <QuickAction icon="Eye" label="Stealth" color="purple" onClick={() => {}} />
                        <div className="col-span-2 glass-panel p-3 rounded-2xl flex items-center justify-between px-6 border border-white/5 active:scale-95 transition-transform" onClick={() => alert("Simulated Location Share")}>
                            <div className="flex items-center gap-4">
                                <div className="w-10 h-10 rounded-full bg-blue-500/10 flex items-center justify-center text-blue-400">
                                    <Icon name="Share" className="w-5 h-5" />
                                </div>
                                <div className="flex flex-col text-left">
                                    <span className="text-sm font-bold text-white uppercase">Share Location</span>
                                    <span className="text-[10px] text-slate-400">Trusted Contacts Only</span>
                                </div>
                            </div>
                            <Icon name="Users" className="w-4 h-4 text-slate-500" />
                        </div>
                    </div>
                </div>
            );
        };

        const MapView = () => {
            const [viewMode, setViewMode] = useState('Tactical');
            const [scan, setScan] = useState(true);

            return (
                <div className="h-screen w-full relative bg-[#000510] overflow-hidden flex flex-col">
                    {/* Map Visuals */}
                    <div className="absolute inset-0">
                        <div className="absolute inset-0 grid-bg opacity-30"></div>
                        {/* Radar Effect */}
                        <div className="absolute inset-0 flex items-center justify-center pointer-events-none opacity-20">
                            <div className="w-[600px] h-[600px] border border-cyan-500/20 rounded-full"></div>
                            <div className="w-[400px] h-[400px] border border-cyan-500/20 rounded-full"></div>
                            <div className="w-[200px] h-[200px] border border-cyan-500/20 rounded-full"></div>
                            <div className="absolute top-1/2 left-1/2 w-[300px] h-[300px] bg-gradient-to-t from-cyan-500/20 to-transparent -translate-x-1/2 -translate-y-1/2 rounded-full" style={{transformOrigin: 'bottom center', animation: 'radar 4s linear infinite'}}></div>
                        </div>
                        
                        {/* Markers */}
                        <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 flex flex-col items-center">
                            <div className="w-4 h-4 bg-rose-500 rounded-full border-2 border-white shadow-[0_0_20px_#f43f5e] animate-pulse"></div>
                            <div className="w-24 h-24 bg-rose-500/10 rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 animate-ping"></div>
                        </div>

                        {/* Guardian Markers */}
                        <div className="absolute top-[30%] left-[20%] flex flex-col items-center gap-1 animate-float">
                            <div className="w-8 h-8 rounded-full bg-slate-900 border border-emerald-500 flex items-center justify-center text-[10px] font-bold text-emerald-400 shadow-lg">DAD</div>
                            <div className="text-[9px] font-mono text-emerald-400 bg-black/60 px-2 rounded backdrop-blur-sm border border-emerald-500/30">HOME</div>
                        </div>
                        <div className="absolute bottom-[40%] right-[20%] flex flex-col items-center gap-1 animate-float" style={{animationDelay: '1s'}}>
                            <div className="w-8 h-8 rounded-full bg-slate-900 border border-blue-500 flex items-center justify-center text-[10px] font-bold text-blue-400 shadow-lg">SIS</div>
                            <div className="text-[9px] font-mono text-blue-400 bg-black/60 px-2 rounded backdrop-blur-sm border border-blue-500/30">ACTIVE</div>
                        </div>
                    </div>

                    {/* HUD Header */}
                    <div className="absolute top-6 left-6 right-6 flex justify-between items-start z-20">
                        <div>
                            <h2 className="text-xl font-bold text-white uppercase tracking-tight flex items-center gap-2">
                                <Icon name="Crosshair" className="w-5 h-5 text-rose-500"/> GLOBAL INTEL
                            </h2>
                            <div className="flex gap-2 mt-2">
                                {['Tactical', 'Satellite'].map(m => (
                                    <button key={m} onClick={()=>setViewMode(m)} className={`text-[10px] uppercase font-bold px-3 py-1 rounded border transition-colors ${viewMode === m ? 'bg-cyan-500/20 border-cyan-500 text-cyan-400' : 'bg-black/40 border-white/10 text-slate-500'}`}>
                                        {m}
                                    </button>
                                ))}
                            </div>
                        </div>
                        <div className="glass-panel px-3 py-1 rounded-lg flex items-center gap-2 border-rose-500/30">
                            <span className="w-1.5 h-1.5 rounded-full bg-rose-500 animate-pulse"></span>
                            <span className="text-[10px] font-mono text-rose-400">SCANNING...</span>
                        </div>
                    </div>

                    {/* Guardian HUD Panel (Bottom Sheet) */}
                    <div className="absolute bottom-24 left-4 right-4 z-20">
                        <div className="glass-card p-4 rounded-3xl border border-white/10 shadow-2xl">
                            <div className="flex justify-between items-center mb-4 pb-2 border-b border-white/5">
                                <h3 className="text-xs font-bold text-slate-300 uppercase tracking-widest flex items-center gap-2">
                                    <Icon name="Users" className="w-4 h-4 text-cyan-400"/> Trusted Network
                                </h3>
                                <span className="text-[9px] font-mono text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20">ALL SECURE</span>
                            </div>
                            <div className="grid grid-cols-3 gap-2">
                                {['Dad', 'Sister', 'Rahul'].map((n, i) => (
                                    <div key={i} className="bg-white/5 rounded-xl p-2 flex flex-col items-center gap-1 border border-white/5 hover:border-white/10 transition-colors">
                                        <div className="w-8 h-8 rounded-full bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center text-[10px] font-bold shadow-inner relative">
                                            {n[0]}
                                            <div className={`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#000510] ${i===2?'bg-slate-500':'bg-emerald-500'}`}></div>
                                        </div>
                                        <span className="text-[10px] font-medium text-slate-300">{n}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ProtocolView = () => (
            <div className="px-6 pt-8 pb-32 h-full overflow-y-auto">
                <h2 className="text-2xl font-bold text-white mb-6 uppercase tracking-tight flex items-center gap-3">
                    <Icon name="Grid" className="w-6 h-6 text-rose-500"/> Tactical Modules
                </h2>
                <div className="grid grid-cols-2 gap-4">
                    {[
                        {t:"Fake Call", d:"Disguise", i:"Phone", c:"purple"},
                        {t:"Safe Route", d:"Navigation", i:"Map", c:"emerald"},
                        {t:"Siren", d:"Deterrent", i:"Siren", c:"rose"},
                        {t:"Share", d:"Location", i:"Share", c:"cyan"}
                    ].map((m, i) => (
                        <div key={i} className="glass-card p-5 rounded-3xl flex flex-col gap-4 active:scale-95 transition-transform group border border-white/5 hover:border-white/10">
                            <div className="flex justify-between items-start">
                                <div className={`w-10 h-10 rounded-xl bg-${m.c}-500/10 flex items-center justify-center text-${m.c}-400 group-hover:scale-110 transition-transform shadow-[0_0_15px_rgba(0,0,0,0.3)]`}>
                                    <Icon name={m.i} className="w-5 h-5" />
                                </div>
                                <div className={`w-1.5 h-1.5 rounded-full bg-${m.c}-500 shadow-[0_0_5px_currentColor]`}></div>
                            </div>
                            <div>
                                <h3 className="font-bold text-white text-lg leading-none mb-1">{m.t}</h3>
                                <p className="text-[10px] text-slate-400 uppercase tracking-wider font-mono">{m.d}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const LegalView = () => {
            const [msgs, setMsgs] = useState([{id:1, text:"Raksha Secure Channel. State your emergency.", sender:'bot'}]);
            const [txt, setTxt] = useState("");
            
            const send = () => {
                if(!txt) return;
                setMsgs(p => [...p, {id: Date.now(), text:txt, sender:'user'}]);
                setTxt("");
                setTimeout(() => setMsgs(p => [...p, {id:Date.now()+1, text:"Acknowledged. Protocol initiated.", sender:'bot'}]), 800);
            }

            return (
                <div className="h-full flex flex-col px-6 pt-8 pb-24">
                    <h2 className="text-2xl font-bold text-white mb-6 uppercase tracking-tight flex items-center gap-3">
                        <Icon name="FileText" className="w-6 h-6 text-rose-500"/> Legal Terminal
                    </h2>
                    
                    {/* Emergency Cards */}
                    <div className="grid grid-cols-2 gap-4 mb-6">
                        <button className="glass-panel p-4 rounded-2xl border-l-4 border-rose-500 text-left relative overflow-hidden group">
                            <div className="absolute top-0 right-0 p-8 bg-rose-500/10 rounded-bl-full transform translate-x-4 -translate-y-4"></div>
                            <div className="text-rose-400 font-black text-3xl mb-1 group-active:scale-95 transition-transform">100</div>
                            <div className="text-[10px] text-slate-400 uppercase tracking-widest font-bold">Police</div>
                        </button>
                        <button className="glass-panel p-4 rounded-2xl border-l-4 border-purple-500 text-left relative overflow-hidden group">
                            <div className="absolute top-0 right-0 p-8 bg-purple-500/10 rounded-bl-full transform translate-x-4 -translate-y-4"></div>
                            <div className="text-purple-400 font-black text-3xl mb-1 group-active:scale-95 transition-transform">1091</div>
                            <div className="text-[10px] text-slate-400 uppercase tracking-widest font-bold">Helpline</div>
                        </button>
                    </div>

                    {/* Terminal Chat */}
                    <div className="flex-1 glass-card rounded-3xl flex flex-col overflow-hidden border border-white/10">
                        <div className="p-3 bg-white/5 border-b border-white/5 text-[10px] font-mono text-cyan-400 uppercase tracking-widest flex justify-between items-center">
                            <span>AI LEGAL ASSISTANT v2.0</span>
                            <span className="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></span>
                        </div>
                        <div className="flex-1 p-4 overflow-y-auto space-y-4">
                            {msgs.map(m => (
                                <div key={m.id} className={`flex ${m.sender==='user'?'justify-end':'justify-start'}`}>
                                    <div className={`max-w-[85%] p-3 rounded-2xl text-sm ${m.sender==='user'?'bg-rose-600 text-white rounded-tr-sm':'bg-white/10 text-slate-300 rounded-tl-sm border border-white/5'}`}>
                                        {m.text}
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="p-3 border-t border-white/5 flex gap-2 bg-black/20">
                            <input 
                                className="flex-1 bg-transparent border-none outline-none text-white text-sm font-mono placeholder-slate-600"
                                placeholder="TYPE QUERY..."
                                value={txt}
                                onChange={e => setTxt(e.target.value)}
                            />
                            <button onClick={send} className="text-cyan-400 p-2 hover:bg-white/5 rounded-lg transition-colors"><Icon name="Send" className="w-5 h-5"/></button>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const { user, login } = useAuth();
            const [view, setView] = useState('home');
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            if (!user) {
                return (
                    <div className="h-screen w-full flex items-center justify-center p-6 bg-[#000510]">
                        <div className="glass-card w-full max-w-sm p-10 rounded-[2.5rem] flex flex-col items-center text-center relative overflow-hidden border border-white/10">
                            <div className="absolute inset-0 grid-bg opacity-30"></div>
                            <div className="w-20 h-20 rounded-2xl bg-gradient-to-br from-rose-600 to-rose-800 flex items-center justify-center shadow-[0_0_40px_rgba(244,63,94,0.4)] mb-6 relative z-10 border border-white/10">
                                <Icon name="Shield" className="w-10 h-10 text-white" />
                            </div>
                            <h1 className="text-4xl font-black text-white mb-2 relative z-10 tracking-tight italic">RAKSHA</h1>
                            <p className="text-slate-400 text-xs mb-8 relative z-10 font-mono tracking-widest uppercase">Sentinel System v9.2</p>
                            <button onClick={() => login('demo@raksha.ai')} className="w-full py-4 bg-white text-black rounded-xl font-black uppercase tracking-widest text-xs shadow-lg relative z-10 active:scale-95 transition-transform hover:shadow-[0_0_20px_rgba(255,255,255,0.4)]">
                                Initialize Demo
                            </button>
                        </div>
                    </div>
                );
            }

            const navLinks = [
                { id: 'home', label: 'Command' },
                { id: 'protocol', label: 'Modules' },
                { id: 'map', label: 'Global Map' },
                { id: 'legal', label: 'Legal' }
            ];

            const signOut = () => {
                const { logout } = useAuth();
                logout();
            }

            return (
                <div className="h-screen w-full relative font-sans text-slate-200">
                    <div className="fixed inset-0 z-[-1] pointer-events-none bg-[#000510]">
                        <div className="absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-rose-600/10 rounded-full blur-[100px] animate-float"></div>
                        <div className="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[100px] animate-float" style={{animationDelay:'2s'}}></div>
                        <div className="absolute inset-0 grid-bg opacity-20"></div>
                    </div>

                    <nav className="fixed top-0 left-0 w-full z-50 p-4">
                        <div className="glass-panel rounded-2xl px-4 py-3 flex justify-between items-center relative">
                            <div className="flex items-center gap-3 cursor-pointer" onClick={() => setView('home')}>
                                <div className="bg-rose-600 p-1.5 rounded-lg shadow-lg shadow-rose-600/20"><Icon name="Shield" className="w-5 h-5 text-white" /></div>
                                <span className="font-black text-white tracking-tighter text-lg">RAKSHA</span>
                            </div>

                            <div className="flex items-center gap-4">
                                <div className="hidden md:flex items-center gap-2 px-3 py-1 bg-white/5 rounded-full border border-white/5">
                                    <div className="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                                    <span className="text-[10px] font-mono text-emerald-400">SYSTEM ONLINE</span>
                                </div>
                                <button 
                                    className="p-2 rounded-full hover:bg-white/10 text-white transition-colors relative z-50"
                                    onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                                >
                                    {mobileMenuOpen ? <Icon name="X" className="w-6 h-6" /> : <Icon name="MoreVertical" className="w-6 h-6" />}
                                </button>
                            </div>

                            {mobileMenuOpen && (
                                <div className="absolute top-full right-0 mt-2 w-64 bg-[#0a0a15]/95 backdrop-blur-2xl border border-white/10 rounded-2xl shadow-2xl p-2 flex flex-col gap-1 animate-fade-in z-[60] origin-top-right">
                                    {navLinks.map(link => (
                                        <button 
                                            key={link.id} 
                                            onClick={() => { setView(link.id); setMobileMenuOpen(false); }} 
                                            className={`text-left px-4 py-3 rounded-xl text-sm font-bold transition-all flex items-center justify-between group ${view === link.id ? 'bg-rose-600 text-white shadow-lg shadow-rose-600/20' : 'text-slate-300 hover:bg-white/5 hover:text-white'}`}
                                        >
                                            {link.label}
                                            {view === link.id && <span className="w-1.5 h-1.5 bg-white rounded-full"></span>}
                                        </button>
                                    ))}
                                    <div className="h-px bg-white/10 my-1"></div>
                                    <button onClick={() => { signOut(); setMobileMenuOpen(false); }} className="text-left px-4 py-3 rounded-xl text-sm font-bold text-rose-400 hover:bg-rose-500/10 hover:text-rose-300 transition-all flex items-center gap-2">
                                        <Icon name="LogOut" className="w-4 h-4" /> Sign Out
                                    </button>
                                </div>
                            )}
                        </div>
                    </nav>

                    <main className="h-full w-full pt-20">
                        {view === 'home' && <HomeView user={user} />}
                        {view === 'map' && <MapView />}
                        {view === 'protocol' && <ProtocolView />}
                        {view === 'legal' && <LegalView />}
                    </main>

                    {/* Floating Dock Navigation - Keeps essential shortcuts accessible */}
                    <div className="fixed bottom-6 left-6 right-6 z-40">
                        <nav className="glass-panel rounded-2xl p-2 flex justify-around items-center shadow-2xl backdrop-blur-xl bg-black/60 border border-white/10">
                            {[
                                { id: 'home', icon: 'Shield', label: 'CMD' },
                                { id: 'protocol', icon: 'Grid', label: 'MODS' },
                                { id: 'map', icon: 'Map', label: 'MAP' },
                                { id: 'legal', icon: 'FileText', label: 'LAW' }
                            ].map(item => (
                                <button 
                                    key={item.id} 
                                    onClick={() => setView(item.id)}
                                    className={`p-3 rounded-xl transition-all duration-300 flex flex-col items-center gap-1 w-16 group ${view === item.id ? 'bg-white/10 text-rose-500 shadow-inner' : 'text-slate-500 hover:text-slate-300'}`}
                                >
                                    <Icon name={item.icon} className={`w-6 h-6 ${view === item.id ? 'drop-shadow-[0_0_8px_rgba(244,63,94,0.5)]' : ''}`} />
                                    {view === item.id && <div className="w-1 h-1 rounded-full bg-rose-500 mt-1"></div>}
                                </button>
                            ))}
                        </nav>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
